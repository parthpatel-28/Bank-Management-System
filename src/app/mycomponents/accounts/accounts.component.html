<div class="col-12">
  <div class="title py-2">
     <h4>Accounts</h4>
  </div>
</div>

<div class="row">
  <div class="col-12 ">
      <div class="filters-container">      
          <p-dropdown  [options]="branches" [(ngModel)]="selectedBranch" optionLabel="location" placeholder="Select a Branch"
            [filter]="true">
          </p-dropdown>

          <p-dropdown  [options]="status" [(ngModel)]="statusName" optionLabel="name" placeholder="Select a Status"
          [filter]="true">
          </p-dropdown>

          <p-dropdown  [options]="accountTypeList" [(ngModel)]="accountType" optionLabel="name" placeholder="Select a Account Type"
          [filter]="true">
          </p-dropdown>
        <button class="btn btn-success btn-light-success waves-effect waves-light" (click)="Click_Search($event)">
          <i class="pi pi-search" style="font-size: 0.8rem"></i>
        </button>

        <button class="btn btn-secondary waves-effect ml-1" (click)="Click_Reset()">
          <i class="pi pi-replay" style="font-size: 0.8rem"></i>
        </button>
      </div>
  </div>
</div>



<div class="row mt-5 mb-1">
<div class="col-12 d-flex justify-content-start gap-2">

<button (click)="displayDialog()" class="btn btn-primary waves-effect ml-1"  style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
  <i class="pi pi-plus mr-2"></i> Add New Account
</button>

<button class="excel-btn" (click)="exportToExcel()" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
  <i class="pi pi-file-excel"></i>
  <span>EXCEL</span>
</button>


</div>
</div>


<div class="col-12 mt-1">
<div class="card">
<p-table [value]="accountData" [paginator]="true" [rows]="10" [responsiveLayout]="'scroll'">
<ng-template pTemplate="header" styleClass="p-datatable-striped" class="p-table-striped">
<tr>
  <th></th>
  <th></th>
  <th>ID</th>
  <th>Opening Date</th>
  <th>Account No</th>
  <th>Account Type</th>
  <th>Branch</th>
  <th>Status</th>
  <th>Balance</th>
</tr>
</ng-template>
<ng-template pTemplate="body" let-rowData>
<tr class="ml-5">
  <th>
    <button (click)="displayDialog()" class="btn btn-primary ml-5" style="margin-left: 20%;">
      <i class="pi pi-pencil" style="font-size: 0.8rem"></i>
    </button>
  </th>
  <th>
    <button class="btn btn-primary">
      <i class="pi pi-trash" style="font-size: 0.8rem"></i>
    </button>
  </th>
  <td>{{ rowData.customerId }}</td>
  <td>{{ rowData.accountData.openingDate }}</td>
  <td>{{ rowData.accountData.accountNumber }}</td>
  <td>{{ rowData.accountData.accountType }}</td>
  <td>{{ rowData.branch }}</td>
  <td>
    <span 
      class="status-pill"
      [ngStyle]="{
        'background-color': getColor(rowData.accountData.status ?? 0)
      }">
      {{ rowData.accountData.status }}
    </span>
  </td>
  
  <td>â‚¹{{ rowData.accountData.balance }}</td>
</tr>
</ng-template>
</p-table>
</div>
</div>


<p-dialog 
header="Add New Account" 
[(visible)]="display" 
[modal]="true" 
[style]="{width: '85vw'}  " 
[contentStyle]="{'overflow': 'scroll'}" 
[breakpoints]="{'960px': '95vw'}"
[closable]="true"
>

<div class="col-12 px-3">

<div class="mt-2 border-bottom">
    <h5>Account Assignment</h5>
</div>
<div class="row mb-5 mt-2 ">

    <div  class="col-12 col-sm-4">
          <label class="form-label">Networks</label>
          <p-dropdown placeholder="Choose Your Network" style="width: 100%;"
            appendTo="body" [resetFilterOnHide]="true" [filter]="true"> </p-dropdown>
    </div>
</div>

<div class="mt-5 border-bottom">
    <h5>Account Information</h5>
</div>
<div class="row mb-5 mt-2">
    <div  class="col-12 col-sm-4">
          <label>Company profile</label>
          <input  class="p-inputtext-sm custom-input blue-focus-input w-100" type="text" pInputText placeholder="Choose" />
    </div>
    <div  class="col-12 col-sm-4">
            <label>Company website</label>
            <input  class="p-inputtext-sm custom-input blue-focus-input w-100" type="text" pInputText placeholder="Choose" />
    </div>
    <div  class="col-12 col-sm-4">
            <label>Country</label>
            <input  class="p-inputtext-sm custom-input blue-focus-input w-100" type="text" pInputText placeholder="Choose" />
    </div>
</div>
<div class="row mb-5 mt-2">
    <div  class="col-12 col-sm-4">
          <label>Account Name</label>
          <input  class="p-inputtext-sm custom-input blue-focus-input w-100" type="text" pInputText placeholder="Choose" />
    </div>
</div>


<div class="mt-5 border-bottom">
    <h5>Ad account User invitation</h5>
</div>
<div class="row mb-5 mt-2">
    <div  class="col-12 col-sm-4">
          <label>Invitation E-mail</label>
          <input  class="p-inputtext-sm custom-input blue-focus-input w-100" type="text" pInputText placeholder="Choose" />
    </div>
</div>




 

</div>

<div class="col-12 d-flex justify-content-center gap-3 mt-5">
<button pButton type="button" label="Save" class="col-2 btn btn-light-success p-mr-2" (click)="saveAccount()"></button>
<button pButton type="button" label="Cancel" class="col-2 p-button-danger" (click)="display = false"></button>
</div>


</p-dialog>



