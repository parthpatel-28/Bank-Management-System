<div class="col-12">
  <div class="title py-2">
     <h4>Complaints</h4>
  </div>
</div>

<div class="row">
  <div class="col-12 ">
      <div class="filters-container">      
          <p-dropdown class="filters" [options]="priorityList" [(ngModel)]="priority" optionLabel="name" placeholder="Select Priority"
            [filter]="true">
          </p-dropdown>
  
          <p-dropdown class="filters" [options]="supportTeamList" [(ngModel)]="supportTeam" optionLabel="name" placeholder="Select Priority"
            [filter]="true">
          </p-dropdown>
          
        <button class="btn btn-success btn-light-success waves-effect waves-light" (click)="Click_Search($event)">
          <i class="pi pi-search" style="font-size: 0.8rem"></i>
        </button>

        <button class="btn btn-secondary waves-effect ml-1" (click)="Click_Reset()">
          <i class="pi pi-replay" style="font-size: 0.8rem"></i>
        </button>
      </div>
  </div>
</div>

<div  class="row mt-5">
  <div class="col-4 mb-4 ">
    <div class="p-grid p-grid-responsive p-grid-responsive-md p-grid-responsive-lg">
      <div class="p-card-header d-flex align-items-center">
        <h5 class="p-card-title mb-2">
          Pending Complaints
            </h5>
          </div>
          
          <div class="p-card-body">
            <div style="max-height: 500px; overflow-y: auto;">
              <ul class="list-group">
                <!-- Header Row -->
                <li class="list-group-item d-flex fw-bold "
                style="position: sticky; top: 0; background-color: white; z-index: 1;">
              <div class="d-flex w-100">
                <div class="text-end pr-3" style="width: 30%;">ComplaintID</div>
                <div class="text-center pr-3" style="width: 55%;">Customer Name</div>
                <div class="d-flex align-items-end justify-content-center" style="width: 15%;">Priority</div>
              </div>
            </li>
              <!--No Data-->
              <li *ngIf="!complaintsData?.length">
                <div class="col-12 text-center align-items-center my-4">
                <div>
                  <strong style="font-size: 1.05rem;">No data found</strong>
                </div>
              </div>
              </li>
              <!--Content-->
              <ng-container *ngFor="let item of complaintsData">
                <li *ngIf="item.complaintStatus === 'Pending'" class="list-group-item d-flex">
                  <div class="d-flex w-100">
                    <div class="text-center d-flex align-items-center justify-content-start" style="width: 30%;">
                      <button type="button"
                             (click)="displayInfo(item.complaintId)"
                              pButton
                              icon="pi pi-pencil"
                              class="btn btn-primary btn-sm" style="margin-right: 0.8rem;"></button> 
                      {{item.complaintId}}
                    </div>
                    <div class="text-end d-flex align-items-start justify-content-center" style="width: 55%;">
                      {{item.customerName}}
                    </div>
                    <div class="text-end d-flex align-items-start justify-content-center" style="width: 15%;">
                      {{item.priority}}
                    </div>
                  </div>
                </li>
              </ng-container>
              
          
              </ul>                                          
            </div>
          </div>
        </div>
      </div>

      <div class="col-4 mb-4 ">
        <div class="p-grid p-grid-responsive p-grid-responsive-md p-grid-responsive-lg">
          <div class="p-card-header d-flex align-items-center">
            <h5 class="p-card-title mb-2">
              Under Investigation Complaints
                </h5>
              </div>
              
              <div class="p-card-body">
                <div style="max-height: 500px; overflow-y: auto;">
                  <ul class="list-group">
                    <!-- Header Row -->
                    <li class="list-group-item d-flex fw-bold"
                    style="position: sticky; top: 0; background-color: white; z-index: 1;">
                  <div class="d-flex w-100">
                    <div class="text-end pr-3" style="width: 30%;">ComplaintID</div>
                    <div class="text-center pr-3" style="width: 55%;">Customer Name</div>
                    <div class="d-flex align-items-end justify-content-center" style="width: 15%;">Priority</div>
                  </div>
                </li>
                  <!--No Data-->
                  <li *ngIf="!complaintsData?.length">
                    <div class="col-12 text-center align-items-center my-4">
                    <div>
                      <strong style="font-size: 1.05rem;">No data found</strong>
                    </div>
                  </div>
                  </li>
                  <!--Content-->
                  <ng-container *ngFor="let item of complaintsData">
                    <li *ngIf="item.complaintStatus === 'Under Investigation'" class="list-group-item d-flex">
                      <div class="d-flex w-100">
                        <div class="text-center d-flex align-items-center justify-content-start" style="width: 30%;">
                          <button type="button"
                                 (click)="displayInfo(item.complaintId)"
                                  pButton
                                  icon="pi pi-pencil"
                                  class="btn btn-primary btn-sm" style="margin-right: 0.8rem;"></button> 
                          {{item.complaintId}}
                        </div>
                        <div class="text-end d-flex align-items-start justify-content-center" style="width: 55%;">
                          {{item.customerName}}
                        </div>
                        <div class="text-end d-flex align-items-start justify-content-center" style="width: 15%;">
                          {{item.priority}}
                        </div>
                      </div>
                    </li>
                  </ng-container>
                  
              
                  </ul>                                          
                </div>
              </div>
            </div>
          </div>

          <div class="col-4 mb-4 ">
            <div class="p-grid p-grid-responsive p-grid-responsive-md p-grid-responsive-lg">
              <div class="p-card-header d-flex align-items-center">
                <h5 class="p-card-title mb-2">
                  Resolved Complaints
                    </h5>
                  </div>
                  
                  <div class="p-card-body">
                    <div style="max-height: 500px; overflow-y: auto;">
                      <ul class="list-group">
                        <!-- Header Row -->
                        <li class="list-group-item d-flex fw-bold"
                        style="position: sticky; top: 0; background-color: white; z-index: 1;">
                      <div class="d-flex w-100">
                        <div class="text-end pr-3" style="width: 30%;">ComplaintID</div>
                        <div class="text-center pr-3" style="width: 55%;">Customer Name</div>
                        <div class="d-flex align-items-end justify-content-center" style="width: 15%;">Priority</div>
                      </div>
                    </li>
                      <!--No Data-->
                      <li *ngIf="!complaintsData?.length">
                        <div class="col-12 text-center align-items-center my-4">
                        <div>
                          <strong style="font-size: 1.05rem;">No data found</strong>
                        </div>
                      </div>
                      </li>
                      <!--Content-->
                      <ng-container *ngFor="let item of complaintsData">
                        <li *ngIf="item.complaintStatus === 'Resolved'" class="list-group-item d-flex">
                          <div class="d-flex w-100">
                            <div class="text-center d-flex align-items-center justify-content-start" style="width: 30%;">
                              <button type="button"
                                     (click)="displayInfo(item.complaintId)"
                                      pButton
                                      icon="pi pi-pencil"
                                      class="btn btn-primary btn-sm" style="margin-right: 0.8rem;"></button> 
                              {{item.complaintId}}
                            </div>
                            <div class="text-end d-flex align-items-start justify-content-center" style="width: 55%;">
                              {{item.customerName}}
                            </div>
                            <div class="text-end d-flex align-items-start justify-content-center" style="width: 15%;">
                              {{item.priority}}
                            </div>
                          </div>
                        </li>
                      </ng-container>
                      
                  
                      </ul>                                          
                    </div>
                  </div>
                </div>
              </div>     

      
      </div>


      <p-dialog 
      header="Complaint Details "  
      [(visible)]="display" 
      [modal]="true" 
      [style]="{width: '50vw' }"   
      [breakpoints]="{'960px': '95vw'}"
      [closable]="true"
      
      >

      <ng-container *ngIf="selectedComplaint">
        <h3 class="py-2 mb-3 " style="text-align: center;" [ngStyle]="getColor(selectedComplaint.priority)">{{selectedComplaint.priority}} Priority</h3>
       
        <div class="d-flex justify-content-between pr- mt-1 mb-5">
            <div >
              <h5 style="margin-left: 0.6rem;" >Complaint Id : {{selectedComplaint.complaintId}}</h5>
            </div>
            <div> 
              <button type="button"
            (click)="statusChange('Pending',selectedComplaint.complaintId)"  
              class="btn " [ngStyle]="selectedComplaintStatus === 'Pending' ? 
              {'background-color': '#0d1763','color': 'white','fontWeight':'700'} : 
              {'background-color': 'white','color': '#0d1763','fontWeight':'550'}"
              style="width:24vh ; text-align: center;border: 1px solid #0d1763; ; border-radius: 15px 0px 0px 15px;">
              {{selectedComplaintStatus == "Pending" ? 'Pending' : 'Move to Pending'}}</button> 

            <button type="button"
            (click)="statusChange('Under Investigation',selectedComplaint.complaintId)"  
              class="btn " [ngStyle]="selectedComplaintStatus === 'Under Investigation' ? 
              {'background-color': '#0d1763','color': 'white', 'fontWeight':'700'} :
              {'background-color': 'white','color': '#0d1763' ,'fontWeight':'550'}"
              style="width:24vh ; text-align: center;border: 1px solid #0d1763; border-radius: 0px;"
              >{{selectedComplaintStatus == "Under Investigation" ? 'Under Investigation' : 'Move to Investigation'}}</button> 

              <button type="button"
              (click)="statusChange('Resolved',selectedComplaint.complaintId)" 
              class="btn " [ngStyle]="selectedComplaintStatus === 'Resolved' ?
              {'background-color': '#0d1763','color': 'white','fontWeight':'700'} : 
              {'background-color': 'white','color': '#0d1763','fontWeight':'550'}"
              style="width:24vh ; text-align: center;border: 1px solid #0d1763;border-radius: 0px 15px 15px 0px;"
              >{{selectedComplaintStatus == "Resolved" ? 'Resolved' : 'Move to Resolved'}}</button> 
            </div>
        </div> 
   
        <div class="d-flex" >
          <div class="col-6 px-3">
            <div class="p-card">
            <div class="p-card-body box-style mt-3">
              <h5 style=" text-align: center; font-weight: 700; color: rgb(69, 67, 67);">Customer Name : 
                <span style="font-weight: 700;color: #001845;"> {{selectedComplaint.customerName}}</span></h5>
            </div>
            </div>       
          </div> 
           <div class="col-6 px-3">
            <div class="p-card">
            <div class="p-card-body box-style mt-3">
              <h5 style=" text-align: center; font-weight: 700; color: rgb(69, 67, 67);">Complain Type : 
                <span style="font-weight: 700;color: #001845;"> {{selectedComplaint.complaintType}}</span></h5>
            </div>
            </div>       
          </div>   
        </div>

        <div class="d-flex">
          <div class="col-6 px-3">
            <div class="p-card">
            <div class="p-card-body box-style mt-3">
              <h5 style=" text-align: center; font-weight: 700; color: rgb(69, 67, 67);">Complain Date : 
                <span style="font-weight: 700;color: #001845;"> {{selectedComplaint.complaintDate}}</span></h5>
            </div>
            </div>       
          </div>
          <div class="col-6 px-3">
            <div class="p-card">
            <div class="p-card-body box-style mt-3">
              <h5 style=" text-align: center; font-weight: 700; color: rgb(69, 67, 67);">Assigned To : 
                <span style="font-weight: 700;color: #001845;"> {{selectedComplaint.assignedTo}}</span></h5>
            </div>
            </div>       
          </div>
        </div>
      
       <!--
        <h5>complaintDescription :{{selectedComplaint.complaintDescription}}</h5>

        <h5>followUpDate :{{selectedComplaint.followUpDate}}</h5>
-->




        </ng-container>
    </p-dialog>



    