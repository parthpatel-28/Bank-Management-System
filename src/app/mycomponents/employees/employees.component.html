<div class="col-12">
  <div class="title py-2">
     <h4>Employees</h4>
  </div>
</div>

<div class="row mb-5">
  <div class="col-12 ">
      <div class="filters-container">      
          <p-dropdown  [options]="branches" [(ngModel)]="selectedBranch" optionLabel="location" placeholder="Select a Branch"
            [filter]="true">
          </p-dropdown>

          <div>
              <input id="accountNumber" type="text" placeholder="Search For Employee Name" [(ngModel)]="search" class="form-control" />
            </div>
        
        <button class="btn btn-success btn-light-success waves-effect waves-light" (click)="Click_Search($event)">
          <i class="pi pi-search" style="font-size: 0.8rem"></i>
        </button>

        <button class="btn btn-secondary waves-effect ml-1" (click)="Click_Reset()">
          <i class="pi pi-replay" style="font-size: 0.8rem"></i>
        </button>
      </div>
  </div>
</div>


<p-tabView (onChange)="onTabChange($event)"
[(activeIndex)]="selectedTab">
  <p-tabPanel *ngFor="let city of cityTabs" [header]="city.label"  >
 </p-tabPanel>
  </p-tabView>

<div class="row mt-3">
  <div class="d-flex justify-content-around flex-wrap">
  
    <ng-container *ngFor="let item of employeesData">
    <div *ngIf="block=== 1 ? item.blocked : !item.blocked"  class="p-card shadow rounded-3 p-4 mb-5" style="min-width :450px;;  max-width: 600px;">
      <div class="d-flex align-items-center mb-3">
        
        <!-- Avatar -->
        <div class="me-3">
          <i class="pi pi-user fs-1"></i>
        </div>
    
        <!-- Basic Info -->
        <div>
          <h5 class="mb-1 fw-bold">{{item.name}}</h5>
          <p class="mb-0 fw-semibold">{{item.position}}</p>
          <small>{{item.email}}</small>
        </div>
      </div>
    
      <!-- Action Buttons -->
      <div class="d-flex gap-3 mt-3">
        <button pButton type="button" (click)="employeeBlock(item.employeeId)"  [label]="block == 1 ? 'UnBlock' : 'Block'"  class="p-button-outlined p-button-primary w-50" style="border-color:  #0d1763 ; color:  #0d1763;"></button>
        <button pButton type="button" (click)="employeeDetails(item.employeeId)" label="Details" class="p-button w-50 primary " ></button>
      </div>
    </div>
  </ng-container>

  </div>
</div>



<p-dialog 
header="Employee Details "  
[(visible)]="display" 
[modal]="true" 
[style]="{width: '55vw', height : '80vw' }"   
[breakpoints]="{'960px': '95vw'}"
[closable]="true"

>

<h5>{{selectedEmployee.employeeId}}</h5>

<h5>{{selectedEmployee.name}}</h5>

<h5>{{selectedEmployee.position}}</h5>

<h5>{{selectedEmployee.department}}</h5>

<h5>{{selectedEmployee.dateOfJoining}}</h5>

<h5>{{selectedEmployee.contactNumber}}</h5>

<h5>{{selectedEmployee.email}}</h5>

<h5>{{selectedEmployee.branch}}</h5>

<h5>{{selectedEmployee.employmentStatus}}</h5>

<h5>{{selectedEmployee.salary}}</h5>

<h5>{{selectedEmployee.blocked}}</h5>
</p-dialog>


<p-dialog 
header="Delete Account" 
[(visible)]="deleteDisplay" 
[modal]="true" 
[style]="{width: '25vw'}  " 
[breakpoints]="{'960px': '95vw'}"
[closable]="true"
>
<div class="col-12 mb-4">
  <p style="font-size: larger;">Are you sure you want to {{ block == 1 ? 'unblock' : 'block' }} this Account ? </p>
  <p style="font-size: larger;">Employee Name : {{selectedEmployee.name}}<span style="font-weight: 600;"></span> </p>
</div>
<div class="d-flex gap-3 mt-3">
  <button pButton (click)="deleteDisplay = false;"  type="button" label="No" class="p-button-outlined p-button-primary w-50" style="border-color:  #0d1763 ; color:  #0d1763;"></button>
  <button pButton (click)="delete()" label = "Yes"  type="button"   class="p-button w-50 primary " ></button>
</div>